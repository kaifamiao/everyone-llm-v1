# Everyone-LLM 项目启动指南

## 项目结构

```
code/
├── backend/          # FastAPI 后端
├── frontend/         # Nuxt4 前端
└── README.md
```

## 快速开始

### 1. 后端设置

#### 1.1 安装依赖

```bash
cd backend
pip install -r requirements.txt
```

#### 1.2 配置数据库

1. 创建 PostgreSQL 数据库：
```sql
CREATE DATABASE everyone_llm;
```

2. 复制环境变量文件：
```bash
cp .env.example .env
```

3. 修改 `.env` 文件中的数据库连接信息：
```
DATABASE_URL=postgresql://user:password@localhost:5432/everyone_llm
JWT_SECRET_KEY=your-secret-key-here
```

#### 1.3 初始化数据库

```bash
python init_db.py
```

#### 1.4 启动后端服务

```bash
uvicorn main:app --reload
```

后端服务将在 `http://localhost:8000` 启动

访问 `http://localhost:8000/docs` 查看 API 文档

### 2. 前端设置

#### 2.1 安装依赖

```bash
cd frontend
npm install
```

#### 2.2 配置 API 地址

在 `nuxt.config.ts` 中已配置默认 API 地址为 `http://localhost:8000`

如需修改，可设置环境变量：
```bash
export API_BASE_URL=http://localhost:8000
```

#### 2.3 启动前端服务

```bash
npm run dev
```

前端应用将在 `http://localhost:3000` 启动

## 功能特性

### 已实现功能

✅ **后端**
- 用户注册、登录、JWT 认证
- 对话管理（创建、查询、更新、删除）
- 消息管理（保存、查询）
- 积分系统（查询、扣除）
- 积分扣除记录
- PostgreSQL 数据库存储

✅ **前端**
- 响应式布局（PC 和移动端）
- 对话管理（创建、选择、删除、搜索）
- 7种对话模式（AI、文档、知识库、数据库、Web、图片、MCP）
- SSE 流式响应（基础实现）
- Markdown 渲染
- 积分显示
- 设置面板（主题、API 配置、AI 参数）
- Pinia 状态管理

### 待完善功能

⚠️ **需要进一步完善**
- 完整的 SSE 流式响应处理
- 文件上传功能（文档、图片）
- 知识库和数据库选择界面
- Web 搜索和 MCP 配置界面
- 对话标题自动生成（AI 生成）
- 用户登录/注册页面
- Token 刷新机制
- 错误处理和提示优化

## 开发建议

1. **数据库迁移**：建议使用 Alembic 进行数据库迁移管理
2. **API 测试**：使用 Postman 或 Swagger UI 测试 API
3. **前端调试**：使用 Vue DevTools 调试 Pinia 状态
4. **代码规范**：遵循 Python PEP 8 和 JavaScript ESLint 规范

## 注意事项

1. 确保 PostgreSQL 数据库已启动
2. 确保后端服务在 8000 端口运行
3. 前端需要配置正确的 API 地址
4. 首次使用需要注册用户账号
5. 积分系统初始值为 100,000 分

## 问题排查

### 后端问题
- 检查数据库连接配置
- 检查 JWT_SECRET_KEY 是否设置
- 查看控制台错误信息

### 前端问题
- 检查 API 地址配置
- 检查浏览器控制台错误
- 确认后端服务正常运行

## 下一步开发

1. 完善 SSE 流式响应处理
2. 实现文件上传功能
3. 添加用户认证页面
4. 优化移动端体验
5. 添加更多对话模式的具体实现
6. 完善错误处理和用户提示

