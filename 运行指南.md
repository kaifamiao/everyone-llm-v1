# Everyone-LLM è¿è¡ŒæŒ‡å—

## ðŸ“‹ å‰ç½®è¦æ±‚

- **Python 3.11+** 
- **Node.js 18+** å’Œ npm
- **PostgreSQL æ•°æ®åº“**ï¼ˆå·²å®‰è£…å¹¶è¿è¡Œï¼‰

## ðŸš€ å¿«é€Ÿå¯åŠ¨æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨ PostgreSQL æ•°æ®åº“

ç¡®ä¿ PostgreSQL æœåŠ¡æ­£åœ¨è¿è¡Œï¼š

```bash
# macOS (ä½¿ç”¨ Homebrew)
brew services start postgresql

# Linux (ä½¿ç”¨ systemd)
sudo systemctl start postgresql

# æˆ–è€…ç›´æŽ¥å¯åŠ¨
postgres -D /usr/local/var/postgres
```

### ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ•°æ®åº“

è¿žæŽ¥åˆ° PostgreSQL å¹¶åˆ›å»ºæ•°æ®åº“ï¼š

```bash
# è¿žæŽ¥åˆ° PostgreSQL
psql -U postgres

# åœ¨ psql ä¸­æ‰§è¡Œ
CREATE DATABASE everyone_llm;
\q
```

### ç¬¬ä¸‰æ­¥ï¼šé…ç½®å¹¶å¯åŠ¨åŽç«¯

```bash
# 1. è¿›å…¥åŽç«¯ç›®å½•
cd backend

# 2. åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒï¼ˆæŽ¨èï¼‰
python3 -m venv venv
source venv/bin/activate  # macOS/Linux
# æˆ–
venv\Scripts\activate  # Windows

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. é…ç½®çŽ¯å¢ƒå˜é‡
# åˆ›å»º .env æ–‡ä»¶ï¼ˆå¦‚æžœä¸å­˜åœ¨ï¼‰
cat > .env << EOF
DATABASE_URL=postgresql://postgres:password@localhost:5432/everyone_llm
JWT_SECRET_KEY=your-secret-key-change-in-production-$(openssl rand -hex 32)
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
API_BASE_URL=https://api.kfm.plus/v1
CORS_ORIGINS=http://localhost:3000,http://localhost:3001
INITIAL_CREDITS=100000
CREDIT_DEDUCTION_RATE=1.0
EOF

# æ³¨æ„ï¼šè¯·æ ¹æ®å®žé™…æƒ…å†µä¿®æ”¹ DATABASE_URL ä¸­çš„ç”¨æˆ·åå’Œå¯†ç 

# 5. åˆå§‹åŒ–æ•°æ®åº“è¡¨
python init_db.py

# 6. å¯åŠ¨åŽç«¯æœåŠ¡
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

åŽç«¯å°†åœ¨ `http://localhost:8000` å¯åŠ¨

**éªŒè¯åŽç«¯æ˜¯å¦è¿è¡Œï¼š**
- è®¿é—® `http://localhost:8000/docs` æŸ¥çœ‹ Swagger API æ–‡æ¡£
- è®¿é—® `http://localhost:8000/health` åº”è¯¥è¿”å›ž `{"status": "ok"}`

### ç¬¬å››æ­¥ï¼šé…ç½®å¹¶å¯åŠ¨å‰ç«¯

æ‰“å¼€**æ–°çš„ç»ˆç«¯çª—å£**ï¼š

```bash
# 1. è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# 2. å®‰è£…ä¾èµ–
npm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯å°†åœ¨ `http://localhost:3000` å¯åŠ¨

**éªŒè¯å‰ç«¯æ˜¯å¦è¿è¡Œï¼š**
- æµè§ˆå™¨è®¿é—® `http://localhost:3000`
- åº”è¯¥èƒ½çœ‹åˆ° Everyone-LLM ç•Œé¢

## ðŸ”§ è¯¦ç»†é…ç½®è¯´æ˜Ž

### åŽç«¯çŽ¯å¢ƒå˜é‡é…ç½®

ç¼–è¾‘ `backend/.env` æ–‡ä»¶ï¼š

```env
# æ•°æ®åº“è¿žæŽ¥ï¼ˆæ ¹æ®å®žé™…æƒ…å†µä¿®æ”¹ï¼‰
DATABASE_URL=postgresql://ç”¨æˆ·å:å¯†ç @localhost:5432/everyone_llm

# JWT å¯†é’¥ï¼ˆç”Ÿäº§çŽ¯å¢ƒè¯·ä½¿ç”¨å¼ºéšæœºå¯†é’¥ï¼‰
JWT_SECRET_KEY=your-secret-key-here

# CORS å…è®¸çš„æºï¼ˆå‰ç«¯åœ°å€ï¼‰
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# å…¶ä»–é…ç½®ä½¿ç”¨é»˜è®¤å€¼å³å¯
```

### å‰ç«¯ API é…ç½®

å‰ç«¯é»˜è®¤ API åœ°å€åœ¨ `frontend/nuxt.config.ts` ä¸­é…ç½®ï¼š

```typescript
runtimeConfig: {
  public: {
    apiBase: process.env.API_BASE_URL || 'http://localhost:8000'
  }
}
```

å¦‚éœ€ä¿®æ”¹ï¼Œå¯ä»¥ï¼š
1. è®¾ç½®çŽ¯å¢ƒå˜é‡ï¼š`export API_BASE_URL=http://your-api-url`
2. æˆ–ç›´æŽ¥ä¿®æ”¹ `nuxt.config.ts` ä¸­çš„é»˜è®¤å€¼

## ðŸ“ æµ‹è¯•è¿è¡Œ

### æµ‹è¯•åŽç«¯ API

1. **è®¿é—® API æ–‡æ¡£**ï¼š`http://localhost:8000/docs`
2. **æµ‹è¯•å¥åº·æ£€æŸ¥**ï¼š
   ```bash
   curl http://localhost:8000/health
   ```
   åº”è¯¥è¿”å›žï¼š`{"status": "ok"}`

3. **æµ‹è¯•ç”¨æˆ·æ³¨å†Œ**ï¼ˆåœ¨ Swagger UI ä¸­ï¼‰ï¼š
   - æ‰¾åˆ° `/api/v1/auth/register` æŽ¥å£
   - ç‚¹å‡» "Try it out"
   - è¾“å…¥æµ‹è¯•æ•°æ®ï¼š
     ```json
     {
       "username": "testuser",
       "email": "test@example.com",
       "password": "test123456"
     }
     ```
   - ç‚¹å‡» "Execute"

### æµ‹è¯•å‰ç«¯

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`
2. åº”è¯¥èƒ½çœ‹åˆ°ï¼š
   - å·¦ä¾§è¾¹æ ï¼ˆLogoã€æ–°å»ºå¯¹è¯æŒ‰é’®ã€å¯¹è¯åˆ—è¡¨ï¼‰
   - å³ä¾§ä¸»èŠå¤©åŒºåŸŸ
   - åº•éƒ¨è¾“å…¥æ¡†

## âš ï¸ å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“è¿žæŽ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`could not connect to server`

**è§£å†³æ–¹æ³•**ï¼š
- æ£€æŸ¥ PostgreSQL æ˜¯å¦è¿è¡Œï¼š`psql -U postgres -c "SELECT version();"`
- æ£€æŸ¥ `.env` ä¸­çš„ `DATABASE_URL` æ˜¯å¦æ­£ç¡®
- ç¡®è®¤æ•°æ®åº“ `everyone_llm` å·²åˆ›å»º

### 2. ç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**ï¼š`Address already in use`

**è§£å†³æ–¹æ³•**ï¼š
- åŽç«¯ï¼šä¿®æ”¹ `uvicorn` å‘½ä»¤ä¸­çš„ç«¯å£ï¼š`--port 8001`
- å‰ç«¯ï¼šä¿®æ”¹ `nuxt.config.ts` ä¸­çš„ç«¯å£é…ç½®ï¼Œæˆ–ä½¿ç”¨ï¼š`npm run dev -- --port 3001`

### 3. Python ä¾èµ–å®‰è£…å¤±è´¥

**è§£å†³æ–¹æ³•**ï¼š
```bash
# å‡çº§ pip
pip install --upgrade pip

# ä½¿ç”¨å›½å†…é•œåƒï¼ˆå¯é€‰ï¼‰
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### 4. Node.js ä¾èµ–å®‰è£…å¤±è´¥

**è§£å†³æ–¹æ³•**ï¼š
```bash
# æ¸…é™¤ç¼“å­˜
npm cache clean --force

# åˆ é™¤ node_modules é‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install
```

### 5. CORS é”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š`Access to fetch at '...' from origin '...' has been blocked by CORS policy`

**è§£å†³æ–¹æ³•**ï¼š
- æ£€æŸ¥åŽç«¯ `.env` ä¸­çš„ `CORS_ORIGINS` æ˜¯å¦åŒ…å«å‰ç«¯åœ°å€
- é‡å¯åŽç«¯æœåŠ¡

### 6. å‰ç«¯æ— æ³•è¿žæŽ¥åŽç«¯

**è§£å†³æ–¹æ³•**ï¼š
- ç¡®è®¤åŽç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ
- æ£€æŸ¥æµè§ˆå™¨æŽ§åˆ¶å°çš„ç½‘ç»œè¯·æ±‚
- ç¡®è®¤ `nuxt.config.ts` ä¸­çš„ API åœ°å€æ­£ç¡®

## ðŸŽ¯ ä¸‹ä¸€æ­¥

é¡¹ç›®æˆåŠŸè¿è¡ŒåŽï¼Œä½ å¯ä»¥ï¼š

1. **æ³¨å†Œç”¨æˆ·è´¦å·**ï¼šé€šè¿‡ API æ–‡æ¡£æˆ–å‰ç«¯ç•Œé¢æ³¨å†Œ
2. **åˆ›å»ºå¯¹è¯**ï¼šç‚¹å‡»"æ–°å»ºå¯¹è¯"æŒ‰é’®
3. **å‘é€æ¶ˆæ¯**ï¼šåœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ¶ˆæ¯å¹¶å‘é€
4. **æŸ¥çœ‹ç§¯åˆ†**ï¼šåœ¨ä¾§è¾¹æ æŸ¥çœ‹å½“å‰ç§¯åˆ†ï¼ˆåˆå§‹ 100,000 åˆ†ï¼‰
5. **é…ç½®è®¾ç½®**ï¼šç‚¹å‡»è®¾ç½®æŒ‰é’®é…ç½® API Key ç­‰å‚æ•°

## ðŸ“š ç›¸å…³æ–‡æ¡£

- åŽç«¯ API æ–‡æ¡£ï¼š`http://localhost:8000/docs`
- é¡¹ç›®è®¾è®¡è¯´æ˜Žä¹¦ï¼š`è®¾è®¡è¯´æ˜Žä¹¦V0.01.md`
- é¡¹ç›®å¯åŠ¨æŒ‡å—ï¼š`é¡¹ç›®å¯åŠ¨æŒ‡å—.md`

## ðŸ’¡ å¼€å‘æç¤º

1. **åŽç«¯çƒ­é‡è½½**ï¼šä½¿ç”¨ `--reload` å‚æ•°ï¼Œä»£ç ä¿®æ”¹åŽè‡ªåŠ¨é‡å¯
2. **å‰ç«¯çƒ­é‡è½½**ï¼šNuxt é»˜è®¤æ”¯æŒï¼Œä¿®æ”¹ä»£ç åŽè‡ªåŠ¨åˆ·æ–°
3. **æŸ¥çœ‹æ—¥å¿—**ï¼šåŽç«¯æ—¥å¿—åœ¨ç»ˆç«¯è¾“å‡ºï¼Œå‰ç«¯æ—¥å¿—åœ¨æµè§ˆå™¨æŽ§åˆ¶å°
4. **è°ƒè¯•å·¥å…·**ï¼š
   - åŽç«¯ï¼šä½¿ç”¨ Swagger UI æµ‹è¯• API
   - å‰ç«¯ï¼šä½¿ç”¨ Vue DevTools è°ƒè¯• Pinia çŠ¶æ€
